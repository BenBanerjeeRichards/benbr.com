<!DOCTYPE html>

<!--
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'''''''''''''''''''''''','''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
,''''''''''''''',,,,,,,,,,,,'''',,''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
,,''''''''''''',,,,,,,,,,,,,,,,,,,,,''',,,,,,,,,''''''''''''''''''''''''''''''''''''''''''''''''''''
,,'''''''''',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,;,,,,,,,,,''',,,,,''''''''''''''''''''''''''''''''
,,''''''',,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,;;:ccllloollccc::;,,,,,,,,,,,,,,,,,,,,,,'''''''''''''''''
,,'''''',,,,,,,,;,,,,,,,,,,,,,,;;;;;;::cloodxkOO00K0000Okkxdolc:;;,,;;;,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,''',,,,,,,,,,,,,,,,,,,,,,,;;;:::cldxkOOO0000KNNNNXXXKK0OOkkxdol:;;;;;;;;,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,;;;;;;:::::codxkOO00KKKKXXXNNNNXXXXXX0OOOOkkxdolc:::::;,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,;;;:llooooollodxkkkkO0KKKXXXKKXXXXXXXXKKKK000OOOkkxddlc:;;::;;,,,,,,,,,,,,,,,,,''''
,,,,,,,,,,,,,;;;:ccloxxkkkxdddxxxxkkkO0KKKKKKKKKKKKKKKKKKKK00OOOOOOkxxddol:::::::;,,,,,,',,,,,''''''
,,,,,,,,,,,;;:cldkkO0000OkxxxxxxxxxxkO00KKKKKKKKKKKKKKKKKK000OOOOOkkxxxxddolcccllc::;,,,,,,,,,,,,'''
,,,,,,,,,,;:cldk0KKK000OkkxxddddddxxkkO00KKK0000KKKKKKKKKK00000OOkkxxxxxddddoodxxxdol:,,,,,,,,,,,,,,
,,,,,,,,,;:cldkOO0KKK0OkkxxdddddddddxkkkO00000000KKKKKK0KK000OOOkkkxxxxxdddxxddxO0K0koc;,,,,,,,,,,,,
,,,,,,,,;:looodxO0KK0OkxxdddoooodddddxxkkOOO000000000000OOOOOkkxxxxxxxdddodxxxddxOKXXKkl:;,,,,,,,,,,
,,,,,,,;:clllldkO000OkxdddoooooooddxxkkOOO000000000000OOOOOkkkxxxddddddddodddxdddx0XXX0koc;,,,,,,,,,
,;;,,,,;clclloxkkOOOkxdoddoooloodxxkO000000KK000000000OO00OOkkxxddddooddooodddddddk0XXKOxol:;;,,,,,,
,;;;;;;:clodxxxxxkkxdoolodoodxxxxxkkOO000O0KKKKKK000000000OOkkxxddddooooolooddddddxOKX0Oxdollc;,,,,,
;;;;,;;cldxxxxxxxdddooloddoodxxxxxxdxxkOkkkkO000000OOOOO0000OOkxxddoooolllloddxddxxO0KK0kxdollc:;,,,
;;;;;::coxxxxdddollllllodolloodoooolc:cloooddxkkkkkkxkkkkkkkkkkkkxxddoolllloddxddxxk0KK0kxdocc::;,''
;;;;::ccldxxxxool:;:ll:;;;,,;;;:ccc:;,,,,;;:clodoolllollllloddddxxxxdollooooodddddxxO00Okxxdl:;,,'''
;;;;;::clodxxxdolc;;;;,..';:c:::::ccc:;;,..',;cll;,,',:cc:coddoddddddolodoollloooodxxOOkkxddoc:;''.'
;;;;;;;:cloddddddddl;','.'::;''''''''...........''....,;;;:lllllllllloooo:,,,,:ccclodxxxdddddolc;,''
;;;;;;;;:clodxxxxxdoc,'..',,;:;'.........''...........'''',,,;;;;:::;;;cc;,'.''',',cllooodxxxolc;,''
;;;;;;;;:clldxxdddooc:;,',:;'''''.'',,,'';'.'cddl'..;:,,'......''.;cc::c:::,,;::::;;:cllloddxdl:,'..
;;;;;;;;:clodddlcoollc::,''',,,,''''',;col''lxO00c..;:,'''',;;;cllc::;,'',,;:llloolccccloodddol:,''.
;;,,,,,;:clooool:codlccc:,';okOkxdddxkOko;;odkO0Oxd:,cc;'''',,;;:cll:..,;:::cllllllc;;:lodxxxxdc;'..
,,,,,,,,;:ccccolc:lolllccc;,:odkkkkkxdl;;coxxO00OOOx::dxdlcccccccc:;,,cccc::clloocc:'':oddxdddoc;,'.
'''''''';colllooc:clllclllc:;:cc:;;,',:odooxO0000Okxo:;ldxkOO00Oxl::::clc::lolloocc:''ldddoollc;,''.
'''''''';:clloddollllcclllloooooc,'',:oxxoldkO0Okxdodxo;.,:cllol::ldxoc:cccclllc:::;';dxxdol:;,,'''.
''''..'',,:cloddlllllcccc:ccc:;'..;cl:,,,',;clllcc:cokkl;,;codolccllcllccccccc:;,'',,ldxxxddoc;,''''
''''..'',;:clooolllclllc:;:;,...'clll:... ..........',;coc,,:lodddolc:ccc::::;,,'';;coooddxxxl:,''''
''''...',;:clooolccclllc:::;..';cllclc:;,'.......   ..,loo:,',:cllllccllc:;:::;;::ccoddooooollc;,,,,
''''...'',;:looolc:ccllcc:cl:;cllccccccc::;'..  ....':ccodl:,.';::c:cclolc:;::;:lc:looooodol:::::;;,
'''''..'''',;clol:;;:cllc:codlc:;''''';;;;;;,''',,,,:cccloolc;',:c::clollc:cc:ccccclddoooolc:;;;;;;;
''''''''''',,;;::;;;:clllc:ldoc;'.'',,;;:::::;;::::;;,,,;:looc::llccooollc::::cllccllllllc::;;;;;;;;
''''''''''''''...',,,:cclc:cllllccc:;;;:cooxxxxxddoolc;,''',:loolccoddolc::;:;,,;,,:clccc:::;;;;;;;;
','''''''......  .',,,;:ccc::;:clccc:;,,,;,;;;:cccccccllolcclodolcldddol::;;;,.    .';;,,,''''''',,,
,,,,,'........    .''';;::::;,;:lllcc::;,''''.....',:clloooolllllodddolc:;,,;'       ..............'
,,,,'.........     ...',;::::::cllollllollllclccccclooooddolcccloooolc:;,,,,,.         ............'
'''........         ....,;:cclccclloooodxxxxxkkxxxxdddxxxdlc:ccclllc:;,'',,''.         .............
...........            ..';clllcccllooooddddxxxddxxxxxxxdocccccccc:;,'...'''.           ............
...........              .';:cc:::ccclollolloooddddddddoolllllc::;,'........            ............
...........               ...,;;;;::::cccccccccclloooolc:cccc:;,'........                ...........
...........                  ..'''',,,,,,,'...''';;;;;;,,,,;,'.......            ..      ...........
..........     .              .................................                   ..      ..........
..........    ....  .           ...............................                   ...      .........
..........    .... ..             .............................                   ......   .........
..........    ....  .                 ..........................            ..  .........   ........
..........    . ..  ..                 .................. ......           .... ....................
..........  .   ..  ...   ..             ...............  .....        ....................... .....
.......... .......   ..   ..             .....................      .......................... .... 
   ....... ........  .... ....            ....................     ........................... ..   
   .............................    ...    ...   .......',,,.     ............................ .    
   ............................     ........   .    ..',;::'.    ...........................        
.   ..........  .................   ..''...... .......',;;'..........................    ...        
.    .........     .....................,'........'''.',,'..... ....................    ....        
..   ............     ...................',,,'',;::::;;,....... ..................    .....    ..   
..   ..............     ...................;c::ccccc:c:,........................     .......  ....  

-->

<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>IASIP</title>
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

	<style>

    @font-face {
      /* Not sure how many laws are being broken by using this font without license
        but meming needs no license, as I have been told by The Laywer */
    font-family: 'textileregular';
    src: url('textile-webfont.woff2') format('woff2'),
         url('textile-webfont.woff') format('woff'),
         url('textile-webfont.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }

    body {
      font-family: "textileregular";
      background-color: black;
          overflow:hidden;

    }

		.videoContainer {
			  position: absolute;
			  width: 100%;
			  height: 100%;
			  top: 0;
			  left: 0;
			  bottom: 0;
			  right: 0;
			  display: flex;
			  flex-direction: column;
			  justify-content: center;
			  align-items: center;
			}

			iframe {
			  /* optional */
			  width: 100%;
			  height: 100%; 
			}

    .center {
      color: white;
      line-height: 1.5;
      font-size: 4em;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding-left: 10%;
    padding-right: 10%;
    }


	</style>

	<script>
  		var root = "http://206.189.72.180:3000/";

      // 2. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '1080',
          width: '1920',
          videoId: 'pukZ8R522Sg',
   		 playerVars: { 'autoplay': 0, 'controls': 0, 'modestbranding': 1, 'showinfo': 0},
          frameborder: '0',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }

      function onPlayerReady(event) {
        url = new URL(window.location)
        t = url.searchParams.get("text")
        console.log(t);
        if (t === null || t.length == 0) {
          // use ID param instead
          var id = url.searchParams.get("id");
          $.ajax({
              url: root + "title",
            type: "get",
            data: {id:id},
            success: function(data) {
              console.log(data)
              document.getElementById("text").innerHTML = "\"" + data.text + "\""

              // Start video
              event.target.playVideo();
            },
            error: function(xhr, status, error) {
              console.log(xhr, status, error);
            }
          })
        } else{
          text = atob(t)
          document.getElementById("text").innerHTML = "\"" + text + "\""
          event.target.playVideo();
        }

      }

      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING) {
        	// Video started playing
        	// Start timing when we should start playing video
          window.setTimeout(showVideo, 4000)
        }
      }
      function showVideo() {
        document.getElementById("player").style.display = "block"
      }

      function stopVideo() {
        player.stopVideo();
      }

    </script>

</head>
<body>
 	<div id="player" class="videoContainer" style="display: none;"></div>
	  <div id="title" > <div class="center" id="text">
    </div></div>
</body>
</html> 